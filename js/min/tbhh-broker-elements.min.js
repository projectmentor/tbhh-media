/* tbhh-broker-elements.js - Minified 2025-09-15_224032 */
{window.tbhhBrokerElements=window.tbhhBrokerElements||{};const e={BROKER_NAME_ELEMENTS:".company, .broker-name, [data-broker-name], .co-name",AGENT_INFO_ELEMENTS:".detail-info, .owner-info, .agent-info",BROKER_LOGO_ELEMENTS:"img.broker-logo, img[data-broker-logo]",SUBDOMAIN_DETAIL:".subdomain-detail"},o="[TBHH BrokerElements]",n=3e3,t=500,r=10;let l=!1,i=null,a=null,s=0,d=null;const m=()=>window.tbhhBrokerInfo?window.tbhhBrokerInfo.getBrokerData():(console.error(`${o} Cannot get agent data: tbhhBrokerInfo module not available`),null),c=()=>{const n=m();if(n)try{const o=window.tbhhConfig.BROKER_CONFIG,t=Object.values(o).map(e=>e.name||""),r=Object.values(o).map(e=>e.shortName||"");document.querySelectorAll(e.BROKER_NAME_ELEMENTS).forEach(e=>{const o=e.textContent.trim(),l=t.some(e=>o.includes(e)),i=r.some(e=>o===e);(l||i)&&(e.textContent=n.name)}),n.isSubdomain&&document.querySelectorAll(e.AGENT_INFO_ELEMENTS).forEach(o=>{o.closest(e.SUBDOMAIN_DETAIL)||(o.style.display="none")}),n.logo&&document.querySelectorAll(e.BROKER_LOGO_ELEMENTS).forEach(e=>{e.src=n.logo})}catch(e){console.error(`${o} Error processing DOM elements:`,e)}else console.warn(`${o} No agent data available, cannot replace elements`)},E=()=>{i&&i.disconnect(),i=new MutationObserver(c),i.observe(document.body,{childList:!0,subtree:!0})};window.tbhhBrokerElements.init=()=>{try{if(l)return void console.log(`${o} Already initialized, skipping`);if(console.log(`✅ ${o} Initializing agent/broker elements module...`),!window.tbhhBrokerInfo)return s>=r?void console.error(`${o} Max retries (${r}) exceeded. Broker info module not available.`):(s++,console.warn(`${o} Broker info module not loaded. Retry ${s}/${r} in ${t}ms`),d&&clearTimeout(d),void(d=setTimeout(()=>{d=null,window.tbhhBrokerElements.init()},t)));if(!window.tbhhConfig)return void console.error(`${o} Configuration not available. Cannot proceed.`);s=0,c(),E(),a=setInterval(c,n),l=!0,window.tbhhCore?.emitEvent&&window.tbhhCore.emitEvent("brokerElementsInitialized",{timestamp:Date.now()}),console.log(`✅ ${o} Agent/broker elements module initialized`)}catch(e){console.warn(`${o} Error initializing agent/broker elements:`,e)}},window.tbhhBrokerElements.destroy=()=>{try{i&&(i.disconnect(),i=null),a&&(clearInterval(a),a=null),d&&(clearTimeout(d),d=null),l=!1,s=0,window.tbhhCore?.emitEvent&&window.tbhhCore.emitEvent("brokerElementsDestroyed",{timestamp:Date.now()}),console.log(`✅ ${o} Agent/broker elements module destroyed`)}catch(e){console.warn(`${o} Error destroying agent/broker elements module:`,e)}}}